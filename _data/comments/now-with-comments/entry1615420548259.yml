_id: 22c8f8b0-81fc-11eb-ae24-af8f5674fe21
_parent: 'https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html'
replying_to_uid: ''
message: "Almost there but I'm hitting a nasty bug. Comments are saving just fine by following this tutorial, but will not load.\r\n\r\nI'm saving them in site.data.comments.recipes.recipe-name and have tried a few different iterations of comments.html to load them, all unsuccessful. \r\n\r\nI'm close, because it's loading the raw comment on the page but not parsing it correctly.\r\n\r\nHere's the key file: https://github.com/datapolitical/contrast/blob/master/_includes/comments.html\r\n\r\nAnd the relevant code:\r\n\r\n  {% if site.data.comments.recipes\\[urlfilename\\] %}\r\n        <!-- Start static comments -->\r\n        <div id=\"comments\" class=\"js-comments\">\r\n          <h2 class=\"page__section-label\">\r\n            {% if site.data.comments.recipes\\[urlfilename\\].size > 1 %}\r\n              {{ site.data.comments.recipes\\[urlfilename\\] | size }}\r\n            {% endif %}\r\n            Comments test 1\r\n          </h2>\r\n          <h2> {{ site.data.comments.recipes\\[urlfilename\\] }} </h2>\r\n    {% assign comments = site.data.comments.recipes\\[urlfilename\\] | sort | where_exp: 'entry', 'comment[1].replying_to_uid == blank' %}\r\n    {% for comment in comments %}\r\n      <h3>comment test 2</h3>\r\n      {% assign index       = forloop.index %}\r\n      <!-- {% assign replying_to = comment[1].replying_to | to_integer %}\r\n      {% assign avatar      = comment[1].avatar %} -->\r\n      {% assign email       = comment[1].email %}\r\n      {% assign name        = comment[1].name %}\r\n      {% assign url         = comment[1].url %}\r\n      {% assign date        = comment[1].date %}\r\n      {% assign message     = comment[1].message %}\r\n      {%- assign uid             = comment[1]._id %}\r\n      {% include comment.html index=index replying_to=replying_to avatar=avatar email=email name=name url=url date=date message=message %}\r\n    {% endfor %}\r\n    </div>\r\n    <!-- End static comments -->\r\n  {% endif %}\r\n\r\nI know there's something amiss in how i'm iterating through the available comments, but I'm not familiar enough with Jekyll or ruby to know what's missing."
name: Chris
email: 94fb888077e48c53ccd701c9aceab9fd
hp: ''
date: 1615420548
